@import _colors
@import _mixins

$viewport-width:  640px
$viewport-height: 960px

=no-tap-highlight
  -webkit-tap-highlight-color: rgba(0,0,0,0)

*, input
  font-family: helvetica, sans-serif

body
  margin: 0
  -webkit-text-size-adjust: 100%

a
  color: $primary

.banner
  $height:       43px
  $border-width: 1px

  height:        $height - $border-width
  border-bottom: $border-width solid $dark

  position: relative
  z-index:  4

  +vertical-gradient($light, $primary)
  +text-shadow-top(transparentize($dark, 0.5))

  &:after
    content:         "nnnnext"
    display:         block
    padding-top:     10px
    text-align:      center
    text-decoration: none
    font-size:       20px
    font-weight:     bold
    color:           white

.navigation
  height:  30px
  width:   100%
  display: table

  position: relative
  z-index:  3

  +box-shadow(0 0 5px $dark)

  .inner
    display: table-row

  a
    display:         table-cell
    vertical-align:  middle
    text-align:      center
    text-decoration: none
    background:      $lighter
    color:           $dark
    font-size:       13px
    font-weight:     bold

    +no-tap-highlight
    +text-shadow-bottom(white)

    &.touched
      background: $primary
      +text-shadow-bottom($light)

    &.active
      background: $light
      +text-shadow-bottom($lightest)

.hint-container
  padding: 15px

.hint
  background: $lightest
  color:      $dark
  margin:     0
  padding:    1px
  position:   relative
  font-size:  15px
  +border-radius(15px)

  .text
    margin: 14px 15px

    ul
      list-style:   disc
      padding-left: 1.5em

  .dismiss
    display: none

.links
  background: $lightest
  color:      $primary
  text-align: center
  padding:    8px 0
  font-size:  13px
  opacity:    0.5

  div
    display: inline-block

    &:before
      content: "• "

    &:first-child:before
      display: none

  a
    color: inherit
    text-decoration: none

.about-page
  $padding: 10px

  padding:   $padding
  font-size: 15px
  position:  relative

  +box-sizing(border-box)

  h2
    margin: 0
    padding-top: 2px
    font-size: 18px

  p
    margin: 10px 0

  .dismiss
    position:  absolute
    top:       $padding
    right:     $padding
    font-size: 13px

    &:after
      content: "Back"

.album-search-bar
  $padding:      15px
  $button-width: 85px
  $spacing:      15px

  position: relative
  height:   60px

  .input
    position: absolute
    top:      $padding
    left:     $padding
    right:    $padding + $button-width + $spacing

    input
      +box-sizing(border-box)

      width:     100%
      font-size: 15px

  button
    +box-sizing(border-box)

    position:  absolute
    top:       $padding + 3px
    right:     $padding
    width:     85px
    height:    27px
    font-size: 13px

  .cancel
    $width:      30px
    $img-width:  15px
    $img-offset: ($width - $img-width)/2

    display:    block
    position:   absolute
    top:        $padding + 2px
    right:      $padding + $button-width + $spacing
    width:      $width
    height:     $width
    background: url(/img/cancel-search.png) $img-offset $img-offset no-repeat
    -webkit-background-size: $img-width $img-width

.ui-list
  list-style: none
  margin: 0
  padding: 0
  border-top: 1px solid #ccc

.ui-list-item
  position: relative
  border-bottom: 1px solid #ccc
  overflow: hidden

  +no-tap-highlight

  .info, .controls, .controls .actions, .controls .rate
    -webkit-transform: translate3d(0, 0, 0)
    -webkit-transition: -webkit-transform 0.35s

  .controls .rate
    -webkit-transform: translate3d(100%, 0, 0)

  &.open
    .info
      -webkit-transform: translate3d(100%, 0, 0)

    &.showing-rate-controls
      .controls
        .actions
          -webkit-transform: translate3d(-100%, 0, 0)

        .rate
          -webkit-transform: translate3d(0, 0, 0)

  .info
    position: relative
    z-index:  2
    background: white
    color: black
    padding: 10px

    .primary
      font-size: 18px
      font-weight: bold

    .secondary
      font-size: 15px
      color: #666

    .rate
      float: right
      margin-left: 10px

      span
        font-size: 15px
        color: $control-normal

      span.rated
        color: $control-yellow

  &.touched .info
    +vertical-gradient(#4286f5, #194fdb)

    .primary, .secondary
      color: white

  .controls
    position:   absolute
    top:        0
    bottom:     0
    left:       0
    right:      0
    z-index:    1
    text-align: center

    .actions, .rate
      position: absolute
      top:      0
      bottom:   0
      left:     0
      right:    0

    $dark:  #333
    $light: #444

    $control-color: white
    $touched-color: blue

    background-image: -webkit-gradient(linear, left top, left bottom, from($dark), color-stop(0.33, $light), color-stop(0.67, $light), to($dark))
    color:            $control-color
    text-shadow:      0 0 15px $dark/2

    .button
      display:    inline-block
      position:   relative
      width:      50px
      height:     50px

    .button:before
      position:    absolute
      top:         0
      left:        0
      width:       50px

    .button:after
      position:    absolute
      top:         40px
      left:        0
      width:       50px
      font-weight: bold
      font-size:   10px

    .button.touched
      color: $touched-color
  
    .delete, .restore, .archive, .show-rate-controls, .add
      @extend .button

    .delete:before
      font-size: 40px
      top:       -4px
      content:   "✕"

    .delete:after
      content: "Delete"

    .restore:before
      font-size: 35px
      content:   "↩"

    .restore:after
      content: "Restore"

    .archive:before
      font-size: 40px
      top:       -5px
      content:   "✔"

    .archive:after
      content: "Archive"

    .show-rate-controls:before
      font-size: 30px
      top:       3px
      content:   "★"

    .show-rate-controls:after
      content: "Rate"

    .add:before
      font-size: 40px
      top:       -4px
      content:   "+"

    .add:after
      content: "Add"

    .rate
      span
        @extend .button

      span, span.touched
        color: rgba(0,0,0,0)

      span:before
        font-size: 40px
        content:   "☆"
        color:     $control-color

      span.touched:before
        color: $touched-color

      span.rated:before
        font-size: 40px
        content:   "★"

  &.in-my-list .add
    opacity: 0.5

.album-list
  @extend .ui-list

.album
  @extend .ui-list-item

  .title
    @extend .primary

  .artist
    @extend .secondary

.new-album
  padding: 10px
  font-size: 15px

  label
    color: #666
    display: block
    margin-bottom: 10px

  input
    font-size: 15px
    width: 100px

  button
    font-size: 13px

.friend-list
  @extend .ui-list

.friend
  overflow: hidden
  @extend .ui-list-item

  img
    float:  left
    width:  60px
    height: 60px
    margin-right: 10px

  .info
    overflow: hidden
    padding: 0

    .name
      @extend .primary
      margin-top: 10px

    .nickname
      @extend .secondary

