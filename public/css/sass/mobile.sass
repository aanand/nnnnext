@import _colors
@import _mixins

$viewport-width:  640px
$viewport-height: 960px

=no-tap-highlight
  -webkit-tap-highlight-color: rgba(0,0,0,0)

=header-button($text)
  $offset: 12px
  $border: 2px

  display:  block
  position: absolute
  top:      $offset
  bottom:   $offset
  right:    $offset
  border:   $border solid $dark

  +border-radius(10px)
  +vertical-gradient($light, $dark)

  &:after
    display:     inline-block
    content:     $text
    color:       white
    font-size:   24px
    font-weight: bold
    margin:      (27px - $offset - $border) 20px

*, input
  font-family: helvetica, sans-serif

body
  margin: 0
  -webkit-text-size-adjust: 100%

a
  color: $primary

.banner
  $height:       86px
  $border-width: 2px

  height:        $height - $border-width
  border-bottom: $border-width solid $dark

  position: relative
  z-index:  1

  +vertical-gradient($light, $primary)
  +text-shadow-top(transparentize($dark, 0.5))

  &:after
    content:         "nnnnext"
    display:         block
    padding-top:     20px
    text-align:      center
    text-decoration: none
    font-size:       40px
    font-weight:     bold
    color:           white

  .signin a
    +header-button("Sign in")

  .signout a
    +header-button("Sign out")

.navigation
  height:  60px
  width:   100%
  display: table

  +box-shadow(0 0 10px $dark)

  .inner
    display: table-row

  a
    display:         table-cell
    vertical-align:  middle
    text-align:      center
    text-decoration: none
    background:      $lighter
    color:           $dark
    font-size:       26px
    font-weight:     bold

    +no-tap-highlight
    +text-shadow-bottom(white)

    &.touched
      background: $primary
      +text-shadow-bottom($light)

    &.active
      background: $light
      +text-shadow-bottom($lightest)

.hint
  background: $lightest
  color:      $dark
  margin:     30px
  padding:    1px
  position:   relative
  font-size:  30px
  +border-radius(30px)

  .text
    margin: 29px 30px

    ul
      list-style:   disc
      padding-left: 1.5em

  .dismiss
    display: none

.album-search-bar
  $padding:      30px
  $input-width:  390px

  position: relative
  padding:  $padding

  input
    +box-sizing(border-box)

    width:     $input-width
    font-size: 30px

  button
    +box-sizing(border-box)

    position:  absolute
    top:       $padding + 2px
    right:     $padding
    width:     170px
    height:    53px
    font-size: 26px

  .cancel
    $width:      60px
    $img-width:  30px
    $img-offset: ($width - $img-width)/2

    display:    block
    position:   absolute
    top:        $padding
    left:       $padding + $input-width - $width
    width:      $width
    height:     $width
    background: url(/img/cancel-search.png) $img-offset $img-offset no-repeat

.ui-list
  list-style: none
  margin: 0
  padding: 0
  border-top: 1px solid #ccc

.ui-list-item
  position: relative
  border-bottom: 1px solid #ccc
  overflow: hidden

  +no-tap-highlight

  .info, .controls, .controls .actions, .controls .rate
    -webkit-transform: translate3d(0, 0, 0)
    -webkit-transition: -webkit-transform 0.35s

  .controls .rate
    -webkit-transform: translate3d(100%, 0, 0)

  &.open
    .info
      -webkit-transform: translate3d(100%, 0, 0)

    &.showing-rate-controls
      .controls
        .actions
          -webkit-transform: translate3d(-100%, 0, 0)

        .rate
          -webkit-transform: translate3d(0, 0, 0)

  .info
    position: relative
    z-index:  2
    background: white
    color: black
    padding: 20px

    .primary
      font-size: 36px
      font-weight: bold

    .secondary
      font-size: 30px
      color: #666

    .rate
      position: absolute
      top: 0
      right: 0
      padding: 20px

      span:before
        font-size: 30px
        content:   "★"
        color: $control-normal

      span.rated:before
        color: $control-yellow

  &.touched .info
    +vertical-gradient(#4286f5, #194fdb)

    .primary, .secondary
      color: white

  .controls
    position:   absolute
    top:        0
    bottom:     0
    left:       0
    right:      0
    z-index:    1
    text-align: center

    .actions, .rate
      position: absolute
      top:      0
      bottom:   0
      left:     0
      right:    0

    $dark:  #333
    $light: #444

    background-image: -webkit-gradient(linear, left top, left bottom, from($dark), color-stop(0.33, $light), color-stop(0.67, $light), to($dark))
    color:            white
    text-shadow:      0 0 30px $dark/2

    .button
      display:    inline-block
      position:   relative
      width:      100px
      height:     100px

    .button:before
      position:    absolute
      top:         0
      left:        0
      width:       100px

    .button:after
      position:    absolute
      top:         80px
      left:        0
      width:       100px
      font-weight: bold
      font-size:   20px

    .button.touched
      color: blue
  
    .delete, .restore, .archive, .show-rate-controls
      @extend .button

    .delete:before
      font-size: 80px
      top:       -7px
      content:   "✕"

    .delete:after
      content: "Delete"

    .restore:before
      font-size: 70px
      content:   "↩"

    .restore:after
      content: "Restore"

    .archive:before
      font-size: 80px
      top:       -9px
      content:   "✔"

    .archive:after
      content: "Archive"

    .show-rate-controls:before
      font-size: 60px
      top:       5px
      content:   "★"

    .show-rate-controls:after
      content: "Rate"

    .rate
      span
        @extend .button

      span:before
        font-size: 80px
        content:   "☆"

      span.rated:before
        font-size: 80px
        content:   "★"

.album-list
  @extend .ui-list

.album
  @extend .ui-list-item

  .title
    @extend .primary

  .artist
    @extend .secondary

.new-album
  padding: 20px
  font-size: 30px

  label
    color: #666
    display: block
    margin-bottom: 20px

  input
    font-size: 30px
    width: 200px

  button
    font-size: 26px

.friend-list
  @extend .ui-list

.friend
  overflow: hidden
  @extend .ui-list-item

  img
    float:  left
    width:  120px
    height: 120px

  .info
    overflow: hidden

    .name
      @extend .primary

    .nickname
      @extend .secondary

